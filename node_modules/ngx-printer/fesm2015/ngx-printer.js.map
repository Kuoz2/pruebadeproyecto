{"version":3,"file":"ngx-printer.js","sources":["../../../projects/ngx-printer/src/lib/ngx-printer.component.ts","../../../projects/ngx-printer/src/lib/ngx-print-marker-position.enum.ts","../../../projects/ngx-printer/src/lib/print-service-config.ts","../../../projects/ngx-printer/src/lib/ngx-printer.service.ts","../../../projects/ngx-printer/src/lib/print-item.ts","../../../projects/ngx-printer/src/lib/print-item.directive.ts","../../../projects/ngx-printer/src/lib/print-item-button.directive.ts","../../../projects/ngx-printer/src/lib/print-item-marker.directive.ts","../../../projects/ngx-printer/src/lib/ngx-printer.module.ts","../../../projects/ngx-printer/src/public_api.ts","../../../projects/ngx-printer/src/ngx-printer.ts"],"sourcesContent":["import {\r\n  Component,\r\n  OnInit,\r\n  Renderer2,\r\n  ElementRef,\r\n  Output,\r\n  EventEmitter\r\n} from '@angular/core';\r\n\r\n/**\r\n * Component used to render content when printed to current window\r\n */\r\n@Component({\r\n  selector: 'ngx-printer',\r\n  template: `\r\n    <ng-content></ng-content>\r\n  `,\r\n  styleUrls: ['./ngx-printer.component.css']\r\n})\r\nexport class NgxPrinterComponent implements OnInit {\r\n\r\n  private _renderClass = 'default';\r\n  public get renderClass() {\r\n    return this._renderClass;\r\n  }\r\n  public set renderClass(value) {\r\n    this._renderClass = value;\r\n    this.setCustomClass();\r\n  }\r\n\r\n  /**\r\n   * Display single image\r\n   */\r\n  private _imgSrc = 'default';\r\n  public get imgSrc() {\r\n    return this._imgSrc;\r\n  }\r\n  public set imgSrc(value) {\r\n    this._imgSrc = value;\r\n    this.addImage(this._imgSrc);\r\n  }\r\n\r\n  @Output() completed = new EventEmitter<boolean>();\r\n\r\n  constructor(private elementRef: ElementRef, private renderer: Renderer2) {}\r\n\r\n  ngOnInit() {}\r\n\r\n  /**\r\n   * Attach custom class to element\r\n   */\r\n  private setCustomClass() {\r\n    const natElement = this.elementRef.nativeElement;\r\n\r\n    this.renderer.removeClass(natElement, 'default');\r\n    this.renderer.addClass(natElement, this._renderClass);\r\n  }\r\n\r\n  /**\r\n   * Add custom image\r\n   * @param source \r\n   */\r\n  private addImage(source: string) {\r\n    const natElement = this.elementRef.nativeElement;\r\n\r\n    const newImgElement = this.renderer.createElement('img');\r\n    this.renderer.setAttribute(newImgElement, 'src', source);\r\n\r\n    this.renderer.listen(newImgElement, 'load', (evt) => {\r\n      console.log('loading completed', evt);\r\n      this.completed.emit(true);\r\n    });\r\n\r\n    this.renderer.appendChild(natElement, newImgElement);\r\n  }\r\n}\r\n","export enum ngxPrintMarkerPosition {\r\n    Topleft,\r\n    TopRight,\r\n    BottomLeft,\r\n    BottomRight\r\n}\r\n","import { ngxPrintMarkerPosition } from './ngx-print-marker-position.enum';\r\n/**\r\n * Config for service - used in forRoot\r\n */\r\nexport class PrintServiceConfig {\r\n  /** Print in a new window or not */\r\n  printOpenWindow ? = true;\r\n\r\n  /** Wait time before opening print dialog */\r\n  timeToWaitRender ? = 200;\r\n\r\n  /** Class name to be used when printing in current window */\r\n  renderClass?: string;\r\n\r\n  /* Name ofapp route component - usally 'app-root' used by print to same window */\r\n  appRootName ?  = 'app-root';\r\n\r\n  /* Default postion for image used in directive printerMarker */\r\n  markerPosition ? = ngxPrintMarkerPosition.Topleft;\r\n\r\n  /* Just show preview without fireing the print command - default is false */\r\n  printPreviewOnly ? = false;\r\n}\r\n","import { ngxPrintMarkerPosition } from './ngx-print-marker-position.enum';\r\nimport { PrintItem } from './print-item';\r\nimport {\r\n  Injectable,\r\n  TemplateRef,\r\n  ComponentFactoryResolver,\r\n  Injector,\r\n  Optional,\r\n  Type\r\n} from '@angular/core';\r\nimport { NgxPrinterComponent } from './ngx-printer.component';\r\nimport { Observable, BehaviorSubject } from 'rxjs';\r\nimport { PrintServiceConfig } from './print-service-config';\r\n\r\nexport type Content<T> = string | HTMLElement | TemplateRef<T> | Type<T>;\r\n\r\n/**\r\n * Main print service\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NgxPrinterService {\r\n  private printWindowOpen = new BehaviorSubject<boolean>(false);\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  private _printItems = new BehaviorSubject<PrintItem[]>([]);\r\n  $printItems = this._printItems.asObservable();\r\n\r\n  private openNgxPrinter: HTMLElement;\r\n\r\n  /**\r\n   * Wait time to render before open print dialog in ms\r\n   * Default is 200\r\n   */\r\n  timeToWaitRender = 200;\r\n\r\n  /**\r\n   * Class used in component when printing to current window\r\n   */\r\n  renderClass = 'default';\r\n\r\n  /**\r\n   * Open new window to print or not\r\n   * Default is true\r\n   */\r\n  printOpenWindow = true;\r\n\r\n  /**\r\n   * Name of root component\r\n   * Default is app-root\r\n   */\r\n  appRootName = 'app-root';\r\n\r\n  /**\r\n   * Do not fire print event - just show preview\r\n   * Default is false\r\n   */\r\n  printPreviewOnly = false;\r\n\r\n  appRoot: HTMLElement;\r\n  appRootDislaySetting = '';\r\n\r\n  $printWindowOpen = this.printWindowOpen.asObservable();\r\n  eventadded = [];\r\n  markerPosition: ngxPrintMarkerPosition;\r\n\r\n\r\n  constructor(\r\n    @Optional() config: PrintServiceConfig,\r\n    private resolver: ComponentFactoryResolver,\r\n    private injector: Injector\r\n  ) {\r\n    this.setRootConfigOptions(config);\r\n  }\r\n\r\n  /**\r\n   * Set config from forRoot\r\n   * @param config\r\n   */\r\n  private setRootConfigOptions(config: PrintServiceConfig): void {\r\n    if (config) {\r\n      if (config.printOpenWindow) {\r\n        this.printOpenWindow = config.printOpenWindow;\r\n      }\r\n      if (config.timeToWaitRender) {\r\n        this.timeToWaitRender = config.timeToWaitRender;\r\n      }\r\n      if (config.renderClass) {\r\n        this.renderClass = config.renderClass;\r\n      }\r\n      if (config.appRootName) {\r\n        this.appRootName = config.appRootName;\r\n      }\r\n      if (config.markerPosition) {\r\n        this.markerPosition = config.markerPosition;\r\n      }\r\n      if (config.printPreviewOnly) {\r\n        this.printPreviewOnly = config.printPreviewOnly;\r\n      }\r\n    }\r\n  }\r\n\r\n  /***\r\n   * Print a div identified by its id\r\n   * @example\r\n   * this.printerService.printDiv('printDiv');\r\n   */\r\n  public printDiv(divID: string): void {\r\n    const divToPrint = document.getElementById(divID);\r\n\r\n    if (divToPrint) {\r\n      this.print(divToPrint, this.printOpenWindow);\r\n    } else {\r\n      console.log(`div with id ${divID} not found..`);\r\n    }\r\n  }\r\n\r\n  /***\r\n   * Print an Element identified by its className using getElementsByClassName\r\n   * Prints the first one found\r\n   */\r\n  public printByClassName(className: string): void {\r\n    const elementToPrint = document.getElementsByClassName(className);\r\n\r\n    if (elementToPrint && elementToPrint.length > 0) {\r\n      this.print(<HTMLScriptElement>elementToPrint[0], this.printOpenWindow);\r\n    } else {\r\n      console.log('element with id ${className} not found..');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Print Angular TemplateRef or a Component or String\r\n   * @param contentToPrint\r\n   * @example\r\n   * this.printerService.printAngular(this.PrintTemplateTpl);\r\n   */\r\n  public printAngular(contentToPrint: any, context?: any): void {\r\n    const nativeEl = this.createComponent(contentToPrint, null, context);\r\n\r\n    this.print(nativeEl.nativeElement, this.printOpenWindow);\r\n  }\r\n\r\n  /**\r\n   * Print single img\r\n   * @example\r\n   * this.printerService.printImg('assets/bratwurst.jpg');\r\n   */\r\n  public printImg(imgSrc: string): void {\r\n    const compRef = this.createComponent(null, imgSrc);\r\n    const openNewWindow = this.printOpenWindow;\r\n\r\n    compRef.instance.completed.subscribe(val => {\r\n      compRef.hostView.detectChanges();\r\n      console.log('completed:', val);\r\n      this.print(compRef.location.nativeElement, openNewWindow);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Print an native Element (HTML Element)\r\n   * @param nativeElement\r\n   * @example\r\n   * this.printerService.printHTMLElement(this.PrintComponent.nativeElement);\r\n   */\r\n  public printHTMLElement(nativeElement: HTMLElement): void {\r\n    this.print(nativeElement, this.printOpenWindow);\r\n  }\r\n\r\n  /**\r\n   * Create and render component\r\n   * @param contentToRender\r\n   */\r\n  private createComponent(contentToRender: any, imgSrc?: string, context?: any): any {\r\n    // this.viewContainerRef.clear();\r\n    const factory = this.resolver.resolveComponentFactory(NgxPrinterComponent);\r\n    let componentRef: any;\r\n\r\n    if (contentToRender) {\r\n      if (context === undefined) {\r\n        context = null;\r\n      }\r\n      const ngContent = this.resolveNgContent(contentToRender, context);\r\n      componentRef = factory.create(this.injector, ngContent); // this.viewContainerRef.createComponent(factory);\r\n    } else {\r\n      componentRef = factory.create(this.injector);\r\n    }\r\n    componentRef.instance.renderClass = this.renderClass;\r\n    if (imgSrc) {\r\n      componentRef.instance.imgSrc = imgSrc;\r\n      return componentRef;\r\n    }\r\n\r\n    componentRef.hostView.detectChanges();\r\n    return componentRef.location; // location is native element\r\n  }\r\n\r\n  /**\r\n   * Main print function\r\n   * @param printContent\r\n   */\r\n  private print(printContent: any, printOpenWindow: boolean): void {\r\n    if (printOpenWindow === true) {\r\n      const printContentClone = document.importNode(printContent, true); // printContent.cloneNode(true);\r\n      this.printInNewWindow(printContentClone);\r\n    }\r\n    if (printOpenWindow === false) {\r\n      const printContentClone = document.importNode(printContent, true); // printContent.cloneNode(true);\r\n      const nativeEl = this.createComponent(printContentClone).nativeElement;\r\n      this.openNgxPrinter = nativeEl;\r\n      document.body.appendChild(this.openNgxPrinter);\r\n      // window.scrollTo(0, 0);\r\n      this.getAppRoot();\r\n      if (this.appRoot) {\r\n        this.appRoot.style.display = 'none';\r\n      }\r\n\r\n      this.printCurrentWindow();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Print using a new window / tab\r\n   * @param divToPrint\r\n   */\r\n  private printInNewWindow(divToPrint: HTMLElement): void {\r\n    const printWindow = window.open('', 'PRINT');\r\n    const title = document.title;\r\n\r\n    printWindow.document.write(\r\n      '<HTML><HEAD><TITLE>' + title + '</TITLE></HEAD><BODY></BODY></HTML>'\r\n    );\r\n    // printWindow.document.write(document.documentElement.innerHTML);\r\n\r\n    const printWindowDoc = printWindow.document;\r\n    this.copyCss(printWindowDoc);\r\n    printWindowDoc.body.style.margin = '0 0';\r\n    printWindowDoc.body.appendChild(divToPrint);\r\n    printWindow.document.close();\r\n    // printWindowDoc.body.innerHTML = divToPrint.outerHTML;\r\n    setTimeout(\r\n      () => this.printTabWindow(printWindow, printWindowDoc),\r\n      this.timeToWaitRender\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Copy Css links to new page\r\n   * @param printWindow \r\n   */\r\n  private copyCss(printWindowDoc: Document) {\r\n\r\n    const links = document.querySelectorAll('link');\r\n    const styles = document.querySelectorAll('style');\r\n    const targetHead = printWindowDoc.getElementsByTagName('head')[0];\r\n\r\n    links.forEach(link => {\r\n      targetHead.appendChild(document.importNode(link, true));\r\n    });\r\n\r\n    styles.forEach(style => {\r\n      targetHead.appendChild(document.importNode(style, true));\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Print window in new tab\r\n   */\r\n  private printTabWindow(printWindow: Window, printWindowDoc: Document): void {\r\n    if (this.printPreviewOnly) {\r\n      return;\r\n    }\r\n    this.registerPrintEvent(printWindow, true);\r\n    this.printWindowOpen.next(true);\r\n    printWindow.focus(); // necessary for IE >= 10*/\r\n    if (printWindowDoc.execCommand('print') === false) {\r\n      printWindow.print();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Print the whole current window\r\n   */\r\n  public printCurrentWindow(): void {\r\n    if (this.printPreviewOnly) {\r\n      return;\r\n    }\r\n    this.registerPrintEvent(window, false);\r\n    setTimeout(() => {\r\n      this.printWindowOpen.next(true);\r\n      if (document.execCommand('print') === false) {\r\n        window.print();\r\n      }\r\n    }, this.timeToWaitRender);\r\n  }\r\n\r\n  /**\r\n   * Listen to print event of window\r\n   * @param printWindow\r\n   */\r\n  private registerPrintEvent(printWindow: Window, printWithOpenInNewWindow: boolean) {\r\n    const that = this;\r\n    printWindow.focus(); // necessary for IE >= 10*/\r\n\r\n    if (that.eventadded[printWindow.name]) {\r\n      return;\r\n    }\r\n    printWindow.addEventListener('afterprint', () => {\r\n      this.eventadded[printWindow.name] = true;\r\n      // console.log('afterprint');\r\n      if (printWithOpenInNewWindow) {\r\n        that.eventadded[printWindow.name] = false;\r\n      }\r\n      that.cleanUp(printWindow, printWithOpenInNewWindow);\r\n      that.printWindowOpen.next(false);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Close tab or clean up dom\r\n   * @internal\r\n   */\r\n  private cleanUp(printWindow: Window, printOpenWindow: boolean): void {\r\n    if (printOpenWindow === true) {\r\n      console.log('close print window');\r\n      printWindow.close();\r\n      setTimeout(() => {\r\n        printWindow.close();\r\n      }, 20);\r\n    }\r\n    if (printOpenWindow === false) {\r\n        if (!this.openNgxPrinter) {\r\n          return;\r\n        }\r\n        if (document.body.getElementsByTagName('ngx-printer').length === 0) {\r\n          return;\r\n        }\r\n       \r\n        if (this.appRoot) {\r\n          if (this.appRootDislaySetting !== '') {\r\n            this.appRoot.style.display = this.appRootDislaySetting;\r\n          } else {\r\n            this.appRoot.style.display = '';\r\n          }\r\n        }\r\n\r\n        document.body.removeChild(this.openNgxPrinter);\r\n        this.openNgxPrinter = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create node or angular component\r\n   * @param content\r\n   * @internal\r\n   */\r\n  private resolveNgContent<T>(content: Content<T>, context: any): any {\r\n    if (typeof content === 'string') {\r\n      const element = document.createTextNode(content);\r\n      return [[element]];\r\n    }\r\n\r\n    if (content instanceof TemplateRef) {\r\n      const viewRef = content.createEmbeddedView(context);\r\n      viewRef.detectChanges();\r\n      return [viewRef.rootNodes];\r\n    }\r\n\r\n    if (content instanceof HTMLElement) {\r\n      return [[content]];\r\n    }\r\n\r\n    /** Otherwise it's a component */\r\n    const factory = this.resolver.resolveComponentFactory(content);\r\n\r\n    const componentRef = factory.create(this.injector);\r\n    componentRef.changeDetectorRef.detectChanges();\r\n    return [[componentRef.location.nativeElement]];\r\n  }\r\n\r\n  /**\r\n   * Search for Angular App Root\r\n   * @internal\r\n   */\r\n  private getAppRoot(): void {\r\n    const appRoot = document.body.getElementsByTagName(this.appRootName);\r\n    if (appRoot.length === 0) {\r\n      return null;\r\n    } else {\r\n      this.appRoot = <HTMLElement> appRoot[0];\r\n      this.appRootDislaySetting = this.appRoot.style.display;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add a new item to print\r\n   * Used by directive\r\n   * @internal\r\n   * @param newPrintItem  HTML id\r\n   */\r\n  public addPrintItem(newPrintItem: PrintItem): void {\r\n    const tmpItems = this._printItems.getValue();\r\n    tmpItems.push(newPrintItem);\r\n    this._printItems.next(tmpItems);\r\n  }\r\n\r\n  /**\r\n   * Delete a print item from service\r\n   * Used by directive\r\n   * @internal\r\n   * @param idOfItemToRemove\r\n   */\r\n  public removePrintItem(idOfItemToRemove: string): void {\r\n    const tmpItems = this._printItems.getValue();\r\n    const newIitems = tmpItems.filter(item => item.id !== idOfItemToRemove);\r\n    this._printItems.next(newIitems);\r\n  }\r\n\r\n    /**\r\n   * Gets a single print item from service\r\n   * Used by directive\r\n   * @internal\r\n   * @param idOfItemToFind\r\n   */\r\n  public getPrintItem(idOfItemToRemove: string): PrintItem {\r\n    const tmpItems = this._printItems.getValue();\r\n    const foundItem = tmpItems.find(item => item.id === idOfItemToRemove);\r\n    return foundItem;\r\n  }\r\n\r\n\r\n  /**\r\n   * Print a print Item\r\n   * @param printItemToPrint\r\n   */\r\n  public printPrintItem(printItemToPrint: PrintItem): void {\r\n    this.printHTMLElement(printItemToPrint.nativeElement);\r\n  }\r\n\r\n  /**\r\n   * Print al list of print Items one after the other\r\n   * @param printItemToPrint\r\n   */\r\n  public printPrintItems(printItemsToPrint: PrintItem[], className?: string): void {\r\n    const newDiv = <HTMLDivElement>document.createElement('div');\r\n\r\n    if (className) {\r\n      newDiv.classList.add(className);\r\n    } else {\r\n      newDiv.style.display = 'flex';\r\n      newDiv.style.flexDirection = 'column';\r\n    }\r\n\r\n    printItemsToPrint.forEach(element => {\r\n      newDiv.appendChild(element.nativeElement.cloneNode(true));\r\n    });\r\n\r\n\r\n    this.printHTMLElement(newDiv);\r\n  }\r\n}\r\n","\r\n/**\r\n * A class to store an item which can be printed\r\n */\r\nexport class PrintItem {\r\n  /**\r\n   * HTML id of anchor\r\n   */\r\n  id: string;\r\n\r\n  /**\r\n   * Optional name\r\n   */\r\n  printDisplayName: string;\r\n\r\n  /**\r\n   * HTML Element\r\n   */\r\n  nativeElement: HTMLElement;\r\n\r\n  constructor() {}\r\n}\r\n","import { Directive, ElementRef, OnInit, OnDestroy, Input } from '@angular/core';\r\nimport { NgxPrinterService } from './ngx-printer.service';\r\nimport { PrintItem } from './print-item';\r\n\r\n/**\r\n * A directive to mark and store an HTML-Element as an item which\r\n * can be printed\r\n * An id has to be set\r\n */\r\n@Directive({\r\n  selector: '[ngxPrintItem]'\r\n})\r\nexport class PrintItemDirective implements OnInit, OnDestroy {\r\n\r\n  /**\r\n   * Optional name to be shown in an component\r\n   */\r\n  @Input()\r\n  printName: string;\r\n\r\n  constructor(private el: ElementRef, private printerService: NgxPrinterService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.el.nativeElement.id) {\r\n      const tmpPrintItem = new PrintItem();\r\n      tmpPrintItem.id = this.el.nativeElement.id;\r\n      tmpPrintItem.nativeElement = this.el.nativeElement;\r\n\r\n      this.printerService.addPrintItem(tmpPrintItem);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.el.nativeElement.id) {\r\n      this.printerService.removePrintItem( this.el.nativeElement.id);\r\n    }\r\n  }\r\n\r\n}\r\n","import { Directive, ElementRef, Input, OnInit } from '@angular/core';\r\nimport { NgxPrinterService } from './ngx-printer.service';\r\nimport { PrintItem } from './print-item';\r\n\r\n/**\r\n * Directly add function to a button to print an item\r\n */\r\n@Directive({\r\n  selector: '[ngxPrintItemButton]'\r\n})\r\nexport class PrintItemButtonDirective implements OnInit {\r\n\r\n  /**\r\n   * Id of print item to be printed\r\n   */\r\n  @Input()\r\n  printItemId = '';\r\n\r\n  /**\r\n   * html id of div to be printed\r\n   */\r\n  @Input()\r\n  divID = '';\r\n\r\n  /**\r\n   * print item by class name\r\n   */\r\n  @Input()\r\n  className = '';\r\n\r\n  /**\r\n   * print current window\r\n   */\r\n  @Input()\r\n  printWindow = 'false';\r\n\r\n\r\n  constructor(\r\n    private el: ElementRef,\r\n    private printerService: NgxPrinterService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    if (this.el.nativeElement && this.checkInputs()) {\r\n        this.el.nativeElement.addEventListener('click', () => {\r\n        if (this.printItemId !== '') {\r\n          this.prinPrintItem();\r\n        }\r\n        if (this.divID !== '') {\r\n          this.printerService.printDiv(this.divID);\r\n        }\r\n        if (this.className !== '') {\r\n          this.printerService.printByClassName(this.className);\r\n        }\r\n        if (this.printWindow !== 'false') {\r\n          this.printerService.printCurrentWindow();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if at least one property is set\r\n   */\r\n  private checkInputs() {\r\n    const check = !(this.printWindow === 'false' && this.printItemId === '' && this.divID === '' && this.className === '');\r\n    return check;\r\n  }\r\n\r\n  /**\r\n   * print item from print items\r\n   */\r\n  private prinPrintItem() {\r\n    const itemToPrint = this.printerService.getPrintItem(this.printItemId);\r\n    if (itemToPrint) {\r\n      this.printerService.printPrintItem(itemToPrint);\r\n    }\r\n  }\r\n}\r\n","import {\r\n  Directive,\r\n  ElementRef,\r\n  Renderer2,\r\n  OnInit,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n} from '@angular/core';\r\nimport { NgxPrinterService } from './ngx-printer.service';\r\nimport { ngxPrintMarkerPosition } from './ngx-print-marker-position.enum';\r\n\r\n\r\n/**\r\n * Mark an div as printable and provide direct print function\r\n */\r\n@Directive({\r\n  selector: '[ngxPrintItemMarker]',\r\n})\r\nexport class PrintItemMarkerDirective implements OnInit {\r\n  @Input()\r\n  customClass = '';\r\n\r\n  @Input()\r\n  directPrint = false;\r\n\r\n  @Input()\r\n  imgPosition = ngxPrintMarkerPosition.Topleft;\r\n\r\n  /**\r\n   * Data for an svg image used as background url\r\n   * @example\r\n   * backgroundImage = 'data:image/svg+xml;base64,PD9....'\r\n   *\r\n   */\r\n  @Input()\r\n  backgroundImage =\r\n    'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNy4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgNTAgNTAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDUwIDUwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwYXRoIGQ9Ik0zOS4zODcsMjEuNDcxSDMyLjI5VjExLjE5OWMwLTAuNTUzLTAuNDQ3LTEtMS0xSDE3LjQ4NGMtMC41NTMsMC0xLDAuNDQ3LTEsMXYxMC4yNzFIOS4zODdjLTAuNTUzLDAtMSwwLjQ0Ny0xLDFWMzUuNDUNCgljMCwwLjU1MywwLjQ0NywxLDEsMWg2Ljg5NHYzLjU2NWMwLDAuNTUzLDAuNDQ3LDEsMSwxaDEzLjgwNmMwLjU1MywwLDEtMC40NDcsMS0xVjM2LjQ1aDcuMzAxYzAuNTUzLDAsMS0wLjQ0NywxLTFWMjIuNDcxDQoJQzQwLjM4NywyMS45MTgsMzkuOTM5LDIxLjQ3MSwzOS4zODcsMjEuNDcxeiBNMTguNDg0LDEyLjE5OUgzMC4yOXY5LjI3MUgxOC40ODRWMTIuMTk5eiBNMzAuMDg2LDM5LjAxNkgxOC4yOHYtNi4zMjloMTEuODA2VjM5LjAxNg0KCXogTTM4LjM4NywzNC40NWgtNi4zMDF2LTIuNzY0YzAtMC41NTMtMC40NDctMS0xLTFIMTcuMjhjLTAuNTUzLDAtMSwwLjQ0Ny0xLDF2Mi43NjRoLTUuODk0VjIzLjQ3MWg2Ljg5NA0KCWMwLjA2OCwwLjAxNCwwLjEzMSwwLjA0MSwwLjIwMywwLjA0MUgzMS4yOWMwLjA3MiwwLDAuMTM2LTAuMDI3LDAuMjAzLTAuMDQxaDYuODkzVjM0LjQ1eiIvPg0KPC9zdmc+DQo=';\r\n\r\n  imgMainStyles = {\r\n    'background-color': '#c3c3b6',\r\n    height: '16px',\r\n    width: '16px',\r\n    position: 'absolute',\r\n    cursor: 'pointer'\r\n  };\r\n\r\n  imgPositionTopLeft = {\r\n    left: '1px',\r\n    top: '1px',\r\n  };\r\n\r\n  imgPositionTopRight = {\r\n    right: '1px',\r\n    top: '1px',\r\n  };\r\n\r\n  imgPositionBottomLeft = {\r\n    left: '1px',\r\n    bottom: '1px',\r\n  };\r\n\r\n  imgPositionBottomRight = {\r\n    right: '1px',\r\n    bottom: '1px',\r\n  };\r\n\r\n  /**\r\n   * Event fired when marker clicked\r\n   * @emits\r\n   */\r\n  @Output()\r\n  printClicked = new EventEmitter<any>();\r\n\r\n  constructor(\r\n    private el: ElementRef,\r\n    private renderer2: Renderer2,\r\n    private printerService: NgxPrinterService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    const newIndicator = document.createElement('div');\r\n    this.imgPosition = this.printerService.markerPosition;\r\n\r\n    this.addIndicatorDiv(this.el, newIndicator);\r\n\r\n    newIndicator.addEventListener('click', () => {\r\n      if (this.directPrint) {\r\n        const elementToPrint = this.el.nativeElement.getElementsByClassName(\r\n          'print_indicator'\r\n        );\r\n\r\n        if (elementToPrint && elementToPrint.length > 0) {\r\n          this.renderer2.setStyle(elementToPrint[0], 'visibility', 'hidden');\r\n          this.printerService.printHTMLElement(this.el.nativeElement);\r\n          this.renderer2.setStyle(elementToPrint[0], 'visibility', 'visible');\r\n        } else {\r\n          console.log('element with indicator class not found..');\r\n        }\r\n      }\r\n      this.printClicked.emit(true);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Change and add div with Indicator\r\n   * @param el\r\n   * @param newIndicator\r\n   */\r\n  private addIndicatorDiv(el: ElementRef<any>, newIndicator: HTMLDivElement) {\r\n    const natElement = el.nativeElement;\r\n    this.renderer2.addClass(newIndicator, 'print_indicator');\r\n    this.renderer2.setStyle(natElement, 'position', 'relative');\r\n    this.renderer2.appendChild(el.nativeElement, newIndicator);\r\n    if (this.customClass === '') {\r\n      this.setCss(newIndicator);\r\n    } else {\r\n      this.renderer2.addClass(newIndicator, this.customClass);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set the default css properties\r\n   * @param newIndicator\r\n   */\r\n  private setCss(newIndicator: HTMLDivElement) {\r\n    Object.keys(this.imgMainStyles).forEach((element) => {\r\n      newIndicator.style.setProperty(`${element}`, this.imgMainStyles[element]);\r\n    });\r\n\r\n    this.setPosition(newIndicator);\r\n\r\n    const imgUrl = 'url(' + this.backgroundImage + ')';\r\n    newIndicator.style.setProperty(`background-image`, imgUrl);\r\n  }\r\n\r\n  /**\r\n   * Set image position\r\n   * @internal\r\n   * @param newIndicator\r\n   */\r\n  private setPosition(newIndicator: HTMLDivElement) {\r\n    switch (this.imgPosition) {\r\n      case ngxPrintMarkerPosition.Topleft: {\r\n        Object.keys(this.imgPositionTopLeft).forEach((element) => {\r\n          newIndicator.style.setProperty(\r\n            `${element}`,\r\n            this.imgPositionTopLeft[element]\r\n          );\r\n        });\r\n        break;\r\n      }\r\n      case ngxPrintMarkerPosition.TopRight: {\r\n        Object.keys(this.imgPositionTopRight).forEach((element) => {\r\n          newIndicator.style.setProperty(\r\n            `${element}`,\r\n            this.imgPositionTopRight[element]\r\n          );\r\n        });\r\n        break;\r\n      }\r\n      case ngxPrintMarkerPosition.BottomLeft: {\r\n        Object.keys(this.imgPositionBottomLeft).forEach((element) => {\r\n          newIndicator.style.setProperty(\r\n            `${element}`,\r\n            this.imgPositionBottomLeft[element]\r\n          );\r\n        });\r\n        break;\r\n      }\r\n      case ngxPrintMarkerPosition.BottomRight: {\r\n        Object.keys(this.imgPositionBottomRight).forEach((element) => {\r\n          newIndicator.style.setProperty(\r\n            `${element}`,\r\n            this.imgPositionBottomRight[element]\r\n          );\r\n        });\r\n        break;\r\n      }\r\n      default: {\r\n        Object.keys(this.imgPositionTopLeft).forEach((element) => {\r\n          newIndicator.style.setProperty(\r\n            `${element}`,\r\n            this.imgPositionTopLeft[element]\r\n          );\r\n        });\r\n        break;\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { NgxPrinterComponent } from './ngx-printer.component';\r\nimport { PrintServiceConfig } from './print-service-config';\r\nimport { PrintItemDirective } from './print-item.directive';\r\nimport { PrintItemButtonDirective } from './print-item-button.directive';\r\nimport { PrintItemMarkerDirective } from './print-item-marker.directive';\r\n\r\n@NgModule({\r\n  declarations: [NgxPrinterComponent, PrintItemDirective, PrintItemButtonDirective, PrintItemMarkerDirective],\r\n  imports: [],\r\n  exports: [NgxPrinterComponent, PrintItemDirective, PrintItemButtonDirective, PrintItemMarkerDirective],\r\n  entryComponents: [NgxPrinterComponent]\r\n})\r\nexport class NgxPrinterModule {\r\n  static forRoot(config: PrintServiceConfig): ModuleWithProviders<NgxPrinterModule> {\r\n    return {\r\n      ngModule: NgxPrinterModule,\r\n      providers: [{ provide: PrintServiceConfig, useValue: config }]\r\n    };\r\n  }\r\n}\r\n","/*\r\n * Public API Surface of ngx-printer\r\n */\r\n\r\nexport * from './lib/ngx-printer.service';\r\nexport * from './lib/ngx-printer.component';\r\nexport * from './lib/ngx-printer.module';\r\nexport * from './lib/ngx-print-marker-position.enum'\r\nexport * from './lib/print-item';\r\nexport * from './lib/print-item.directive';\r\nexport * from './lib/print-item-button.directive';\r\nexport * from './lib/print-service-config';\r\nexport * from './lib/print-item-marker.directive';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}