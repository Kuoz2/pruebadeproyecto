!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs")):"function"==typeof define&&define.amd?define("ngx-printer",["exports","@angular/core","rxjs"],e):e((t=t||self)["ngx-printer"]={},t.ng.core,t.rxjs)}(this,(function(t,e,i){"use strict";var n,r=function(){function t(t,i){this.elementRef=t,this.renderer=i,this._renderClass="default",this._imgSrc="default",this.completed=new e.EventEmitter}return Object.defineProperty(t.prototype,"renderClass",{get:function(){return this._renderClass},set:function(t){this._renderClass=t,this.setCustomClass()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imgSrc",{get:function(){return this._imgSrc},set:function(t){this._imgSrc=t,this.addImage(this._imgSrc)},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){},t.prototype.setCustomClass=function(){var t=this.elementRef.nativeElement;this.renderer.removeClass(t,"default"),this.renderer.addClass(t,this._renderClass)},t.prototype.addImage=function(t){var e=this,i=this.elementRef.nativeElement,n=this.renderer.createElement("img");this.renderer.setAttribute(n,"src",t),this.renderer.listen(n,"load",(function(t){console.log("loading completed",t),e.completed.emit(!0)})),this.renderer.appendChild(i,n)},t}();r.decorators=[{type:e.Component,args:[{selector:"ngx-printer",template:"\n    <ng-content></ng-content>\n  ",styles:[":host.default{background-color:#fff;height:100%;left:0;margin:0;position:fixed;top:0;width:100%;z-index:1000000}"]}]}],r.ctorParameters=function(){return[{type:e.ElementRef},{type:e.Renderer2}]},r.propDecorators={completed:[{type:e.Output}]},(n=t.ngxPrintMarkerPosition||(t.ngxPrintMarkerPosition={}))[n.Topleft=0]="Topleft",n[n.TopRight=1]="TopRight",n[n.BottomLeft=2]="BottomLeft",n[n.BottomRight=3]="BottomRight";var o=function(){this.printOpenWindow=!0,this.timeToWaitRender=200,this.appRootName="app-root",this.markerPosition=t.ngxPrintMarkerPosition.Topleft,this.printPreviewOnly=!1},s=function(){function t(t,e,n){this.resolver=e,this.injector=n,this.printWindowOpen=new i.BehaviorSubject(!1),this._printItems=new i.BehaviorSubject([]),this.$printItems=this._printItems.asObservable(),this.timeToWaitRender=200,this.renderClass="default",this.printOpenWindow=!0,this.appRootName="app-root",this.printPreviewOnly=!1,this.appRootDislaySetting="",this.$printWindowOpen=this.printWindowOpen.asObservable(),this.eventadded=[],this.setRootConfigOptions(t)}return t.prototype.setRootConfigOptions=function(t){t&&(t.printOpenWindow&&(this.printOpenWindow=t.printOpenWindow),t.timeToWaitRender&&(this.timeToWaitRender=t.timeToWaitRender),t.renderClass&&(this.renderClass=t.renderClass),t.appRootName&&(this.appRootName=t.appRootName),t.markerPosition&&(this.markerPosition=t.markerPosition),t.printPreviewOnly&&(this.printPreviewOnly=t.printPreviewOnly))},t.prototype.printDiv=function(t){var e=document.getElementById(t);e?this.print(e,this.printOpenWindow):console.log("div with id "+t+" not found..")},t.prototype.printByClassName=function(t){var e=document.getElementsByClassName(t);e&&e.length>0?this.print(e[0],this.printOpenWindow):console.log("element with id ${className} not found..")},t.prototype.printAngular=function(t,e){var i=this.createComponent(t,null,e);this.print(i.nativeElement,this.printOpenWindow)},t.prototype.printImg=function(t){var e=this,i=this.createComponent(null,t),n=this.printOpenWindow;i.instance.completed.subscribe((function(t){i.hostView.detectChanges(),console.log("completed:",t),e.print(i.location.nativeElement,n)}))},t.prototype.printHTMLElement=function(t){this.print(t,this.printOpenWindow)},t.prototype.createComponent=function(t,e,i){var n,o=this.resolver.resolveComponentFactory(r);if(t){void 0===i&&(i=null);var s=this.resolveNgContent(t,i);n=o.create(this.injector,s)}else n=o.create(this.injector);return n.instance.renderClass=this.renderClass,e?(n.instance.imgSrc=e,n):(n.hostView.detectChanges(),n.location)},t.prototype.print=function(t,e){if(!0===e){var i=document.importNode(t,!0);this.printInNewWindow(i)}if(!1===e){i=document.importNode(t,!0);var n=this.createComponent(i).nativeElement;this.openNgxPrinter=n,document.body.appendChild(this.openNgxPrinter),this.getAppRoot(),this.appRoot&&(this.appRoot.style.display="none"),this.printCurrentWindow()}},t.prototype.printInNewWindow=function(t){var e=this,i=window.open("","PRINT"),n=document.title;i.document.write("<HTML><HEAD><TITLE>"+n+"</TITLE></HEAD><BODY></BODY></HTML>");var r=i.document;this.copyCss(r),r.body.style.margin="0 0",r.body.appendChild(t),i.document.close(),setTimeout((function(){return e.printTabWindow(i,r)}),this.timeToWaitRender)},t.prototype.copyCss=function(t){var e=document.querySelectorAll("link"),i=document.querySelectorAll("style"),n=t.getElementsByTagName("head")[0];e.forEach((function(t){n.appendChild(document.importNode(t,!0))})),i.forEach((function(t){n.appendChild(document.importNode(t,!0))}))},t.prototype.printTabWindow=function(t,e){this.printPreviewOnly||(this.registerPrintEvent(t,!0),this.printWindowOpen.next(!0),t.focus(),!1===e.execCommand("print")&&t.print())},t.prototype.printCurrentWindow=function(){var t=this;this.printPreviewOnly||(this.registerPrintEvent(window,!1),setTimeout((function(){t.printWindowOpen.next(!0),!1===document.execCommand("print")&&window.print()}),this.timeToWaitRender))},t.prototype.registerPrintEvent=function(t,e){var i=this,n=this;t.focus(),n.eventadded[t.name]||t.addEventListener("afterprint",(function(){i.eventadded[t.name]=!0,e&&(n.eventadded[t.name]=!1),n.cleanUp(t,e),n.printWindowOpen.next(!1)}))},t.prototype.cleanUp=function(t,e){if(!0===e&&(console.log("close print window"),t.close(),setTimeout((function(){t.close()}),20)),!1===e){if(!this.openNgxPrinter)return;if(0===document.body.getElementsByTagName("ngx-printer").length)return;this.appRoot&&(""!==this.appRootDislaySetting?this.appRoot.style.display=this.appRootDislaySetting:this.appRoot.style.display=""),document.body.removeChild(this.openNgxPrinter),this.openNgxPrinter=null}},t.prototype.resolveNgContent=function(t,i){if("string"==typeof t)return[[document.createTextNode(t)]];if(t instanceof e.TemplateRef){var n=t.createEmbeddedView(i);return n.detectChanges(),[n.rootNodes]}if(t instanceof HTMLElement)return[[t]];var r=this.resolver.resolveComponentFactory(t).create(this.injector);return r.changeDetectorRef.detectChanges(),[[r.location.nativeElement]]},t.prototype.getAppRoot=function(){var t=document.body.getElementsByTagName(this.appRootName);if(0===t.length)return null;this.appRoot=t[0],this.appRootDislaySetting=this.appRoot.style.display},t.prototype.addPrintItem=function(t){var e=this._printItems.getValue();e.push(t),this._printItems.next(e)},t.prototype.removePrintItem=function(t){var e=this._printItems.getValue().filter((function(e){return e.id!==t}));this._printItems.next(e)},t.prototype.getPrintItem=function(t){return this._printItems.getValue().find((function(e){return e.id===t}))},t.prototype.printPrintItem=function(t){this.printHTMLElement(t.nativeElement)},t.prototype.printPrintItems=function(t,e){var i=document.createElement("div");e?i.classList.add(e):(i.style.display="flex",i.style.flexDirection="column"),t.forEach((function(t){i.appendChild(t.nativeElement.cloneNode(!0))})),this.printHTMLElement(i)},t}();s.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new s(e.ɵɵinject(o,8),e.ɵɵinject(e.ComponentFactoryResolver),e.ɵɵinject(e.INJECTOR))},token:s,providedIn:"root"}),s.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],s.ctorParameters=function(){return[{type:o,decorators:[{type:e.Optional}]},{type:e.ComponentFactoryResolver},{type:e.Injector}]};var p=function(){},a=function(){function t(t,e){this.el=t,this.printerService=e}return t.prototype.ngOnInit=function(){if(this.el.nativeElement.id){var t=new p;t.id=this.el.nativeElement.id,t.nativeElement=this.el.nativeElement,this.printerService.addPrintItem(t)}},t.prototype.ngOnDestroy=function(){this.el.nativeElement.id&&this.printerService.removePrintItem(this.el.nativeElement.id)},t}();a.decorators=[{type:e.Directive,args:[{selector:"[ngxPrintItem]"}]}],a.ctorParameters=function(){return[{type:e.ElementRef},{type:s}]},a.propDecorators={printName:[{type:e.Input}]};var c=function(){function t(t,e){this.el=t,this.printerService=e,this.printItemId="",this.divID="",this.className="",this.printWindow="false"}return t.prototype.ngOnInit=function(){var t=this;this.el.nativeElement&&this.checkInputs()&&this.el.nativeElement.addEventListener("click",(function(){""!==t.printItemId&&t.prinPrintItem(),""!==t.divID&&t.printerService.printDiv(t.divID),""!==t.className&&t.printerService.printByClassName(t.className),"false"!==t.printWindow&&t.printerService.printCurrentWindow()}))},t.prototype.checkInputs=function(){return!("false"===this.printWindow&&""===this.printItemId&&""===this.divID&&""===this.className)},t.prototype.prinPrintItem=function(){var t=this.printerService.getPrintItem(this.printItemId);t&&this.printerService.printPrintItem(t)},t}();c.decorators=[{type:e.Directive,args:[{selector:"[ngxPrintItemButton]"}]}],c.ctorParameters=function(){return[{type:e.ElementRef},{type:s}]},c.propDecorators={printItemId:[{type:e.Input}],divID:[{type:e.Input}],className:[{type:e.Input}],printWindow:[{type:e.Input}]};var d=function(){function i(i,n,r){this.el=i,this.renderer2=n,this.printerService=r,this.customClass="",this.directPrint=!1,this.imgPosition=t.ngxPrintMarkerPosition.Topleft,this.backgroundImage="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNy4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgNTAgNTAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDUwIDUwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwYXRoIGQ9Ik0zOS4zODcsMjEuNDcxSDMyLjI5VjExLjE5OWMwLTAuNTUzLTAuNDQ3LTEtMS0xSDE3LjQ4NGMtMC41NTMsMC0xLDAuNDQ3LTEsMXYxMC4yNzFIOS4zODdjLTAuNTUzLDAtMSwwLjQ0Ny0xLDFWMzUuNDUNCgljMCwwLjU1MywwLjQ0NywxLDEsMWg2Ljg5NHYzLjU2NWMwLDAuNTUzLDAuNDQ3LDEsMSwxaDEzLjgwNmMwLjU1MywwLDEtMC40NDcsMS0xVjM2LjQ1aDcuMzAxYzAuNTUzLDAsMS0wLjQ0NywxLTFWMjIuNDcxDQoJQzQwLjM4NywyMS45MTgsMzkuOTM5LDIxLjQ3MSwzOS4zODcsMjEuNDcxeiBNMTguNDg0LDEyLjE5OUgzMC4yOXY5LjI3MUgxOC40ODRWMTIuMTk5eiBNMzAuMDg2LDM5LjAxNkgxOC4yOHYtNi4zMjloMTEuODA2VjM5LjAxNg0KCXogTTM4LjM4NywzNC40NWgtNi4zMDF2LTIuNzY0YzAtMC41NTMtMC40NDctMS0xLTFIMTcuMjhjLTAuNTUzLDAtMSwwLjQ0Ny0xLDF2Mi43NjRoLTUuODk0VjIzLjQ3MWg2Ljg5NA0KCWMwLjA2OCwwLjAxNCwwLjEzMSwwLjA0MSwwLjIwMywwLjA0MUgzMS4yOWMwLjA3MiwwLDAuMTM2LTAuMDI3LDAuMjAzLTAuMDQxaDYuODkzVjM0LjQ1eiIvPg0KPC9zdmc+DQo=",this.imgMainStyles={"background-color":"#c3c3b6",height:"16px",width:"16px",position:"absolute",cursor:"pointer"},this.imgPositionTopLeft={left:"1px",top:"1px"},this.imgPositionTopRight={right:"1px",top:"1px"},this.imgPositionBottomLeft={left:"1px",bottom:"1px"},this.imgPositionBottomRight={right:"1px",bottom:"1px"},this.printClicked=new e.EventEmitter}return i.prototype.ngOnInit=function(){var t=this,e=document.createElement("div");this.imgPosition=this.printerService.markerPosition,this.addIndicatorDiv(this.el,e),e.addEventListener("click",(function(){if(t.directPrint){var e=t.el.nativeElement.getElementsByClassName("print_indicator");e&&e.length>0?(t.renderer2.setStyle(e[0],"visibility","hidden"),t.printerService.printHTMLElement(t.el.nativeElement),t.renderer2.setStyle(e[0],"visibility","visible")):console.log("element with indicator class not found..")}t.printClicked.emit(!0)}))},i.prototype.addIndicatorDiv=function(t,e){var i=t.nativeElement;this.renderer2.addClass(e,"print_indicator"),this.renderer2.setStyle(i,"position","relative"),this.renderer2.appendChild(t.nativeElement,e),""===this.customClass?this.setCss(e):this.renderer2.addClass(e,this.customClass)},i.prototype.setCss=function(t){var e=this;Object.keys(this.imgMainStyles).forEach((function(i){t.style.setProperty(""+i,e.imgMainStyles[i])})),this.setPosition(t);var i="url("+this.backgroundImage+")";t.style.setProperty("background-image",i)},i.prototype.setPosition=function(e){var i=this;switch(this.imgPosition){case t.ngxPrintMarkerPosition.Topleft:Object.keys(this.imgPositionTopLeft).forEach((function(t){e.style.setProperty(""+t,i.imgPositionTopLeft[t])}));break;case t.ngxPrintMarkerPosition.TopRight:Object.keys(this.imgPositionTopRight).forEach((function(t){e.style.setProperty(""+t,i.imgPositionTopRight[t])}));break;case t.ngxPrintMarkerPosition.BottomLeft:Object.keys(this.imgPositionBottomLeft).forEach((function(t){e.style.setProperty(""+t,i.imgPositionBottomLeft[t])}));break;case t.ngxPrintMarkerPosition.BottomRight:Object.keys(this.imgPositionBottomRight).forEach((function(t){e.style.setProperty(""+t,i.imgPositionBottomRight[t])}));break;default:Object.keys(this.imgPositionTopLeft).forEach((function(t){e.style.setProperty(""+t,i.imgPositionTopLeft[t])}))}},i}();d.decorators=[{type:e.Directive,args:[{selector:"[ngxPrintItemMarker]"}]}],d.ctorParameters=function(){return[{type:e.ElementRef},{type:e.Renderer2},{type:s}]},d.propDecorators={customClass:[{type:e.Input}],directPrint:[{type:e.Input}],imgPosition:[{type:e.Input}],backgroundImage:[{type:e.Input}],printClicked:[{type:e.Output}]};var l=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:o,useValue:e}]}},t}();l.decorators=[{type:e.NgModule,args:[{declarations:[r,a,c,d],imports:[],exports:[r,a,c,d],entryComponents:[r]}]}],t.NgxPrinterComponent=r,t.NgxPrinterModule=l,t.NgxPrinterService=s,t.PrintItem=p,t.PrintItemButtonDirective=c,t.PrintItemDirective=a,t.PrintItemMarkerDirective=d,t.PrintServiceConfig=o,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-printer.umd.min.js.map