(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('rxjs')) :
  typeof define === 'function' && define.amd ? define('ngx-printer', ['exports', '@angular/core', 'rxjs'], factory) :
  (global = global || self, factory(global['ngx-printer'] = {}, global.ng.core, global.rxjs));
}(this, (function (exports, i0, rxjs) { 'use strict';

  /**
   * Component used to render content when printed to current window
   */
  var NgxPrinterComponent = /** @class */ (function () {
      function NgxPrinterComponent(elementRef, renderer) {
          this.elementRef = elementRef;
          this.renderer = renderer;
          this._renderClass = 'default';
          /**
           * Display single image
           */
          this._imgSrc = 'default';
          this.completed = new i0.EventEmitter();
      }
      Object.defineProperty(NgxPrinterComponent.prototype, "renderClass", {
          get: function () {
              return this._renderClass;
          },
          set: function (value) {
              this._renderClass = value;
              this.setCustomClass();
          },
          enumerable: false,
          configurable: true
      });
      Object.defineProperty(NgxPrinterComponent.prototype, "imgSrc", {
          get: function () {
              return this._imgSrc;
          },
          set: function (value) {
              this._imgSrc = value;
              this.addImage(this._imgSrc);
          },
          enumerable: false,
          configurable: true
      });
      NgxPrinterComponent.prototype.ngOnInit = function () { };
      /**
       * Attach custom class to element
       */
      NgxPrinterComponent.prototype.setCustomClass = function () {
          var natElement = this.elementRef.nativeElement;
          this.renderer.removeClass(natElement, 'default');
          this.renderer.addClass(natElement, this._renderClass);
      };
      /**
       * Add custom image
       * @param source
       */
      NgxPrinterComponent.prototype.addImage = function (source) {
          var _this = this;
          var natElement = this.elementRef.nativeElement;
          var newImgElement = this.renderer.createElement('img');
          this.renderer.setAttribute(newImgElement, 'src', source);
          this.renderer.listen(newImgElement, 'load', function (evt) {
              console.log('loading completed', evt);
              _this.completed.emit(true);
          });
          this.renderer.appendChild(natElement, newImgElement);
      };
      return NgxPrinterComponent;
  }());
  NgxPrinterComponent.decorators = [
      { type: i0.Component, args: [{
                  selector: 'ngx-printer',
                  template: "\n    <ng-content></ng-content>\n  ",
                  styles: [":host.default{background-color:#fff;height:100%;left:0;margin:0;position:fixed;top:0;width:100%;z-index:1000000}"]
              },] }
  ];
  NgxPrinterComponent.ctorParameters = function () { return [
      { type: i0.ElementRef },
      { type: i0.Renderer2 }
  ]; };
  NgxPrinterComponent.propDecorators = {
      completed: [{ type: i0.Output }]
  };

  (function (ngxPrintMarkerPosition) {
      ngxPrintMarkerPosition[ngxPrintMarkerPosition["Topleft"] = 0] = "Topleft";
      ngxPrintMarkerPosition[ngxPrintMarkerPosition["TopRight"] = 1] = "TopRight";
      ngxPrintMarkerPosition[ngxPrintMarkerPosition["BottomLeft"] = 2] = "BottomLeft";
      ngxPrintMarkerPosition[ngxPrintMarkerPosition["BottomRight"] = 3] = "BottomRight";
  })(exports.ngxPrintMarkerPosition || (exports.ngxPrintMarkerPosition = {}));

  /**
   * Config for service - used in forRoot
   */
  var PrintServiceConfig = /** @class */ (function () {
      function PrintServiceConfig() {
          /** Print in a new window or not */
          this.printOpenWindow = true;
          /** Wait time before opening print dialog */
          this.timeToWaitRender = 200;
          /* Name ofapp route component - usally 'app-root' used by print to same window */
          this.appRootName = 'app-root';
          /* Default postion for image used in directive printerMarker */
          this.markerPosition = exports.ngxPrintMarkerPosition.Topleft;
          /* Just show preview without fireing the print command - default is false */
          this.printPreviewOnly = false;
      }
      return PrintServiceConfig;
  }());

  /**
   * Main print service
   */
  var NgxPrinterService = /** @class */ (function () {
      function NgxPrinterService(config, resolver, injector) {
          this.resolver = resolver;
          this.injector = injector;
          this.printWindowOpen = new rxjs.BehaviorSubject(false);
          /**
           * @internal
           */
          this._printItems = new rxjs.BehaviorSubject([]);
          this.$printItems = this._printItems.asObservable();
          /**
           * Wait time to render before open print dialog in ms
           * Default is 200
           */
          this.timeToWaitRender = 200;
          /**
           * Class used in component when printing to current window
           */
          this.renderClass = 'default';
          /**
           * Open new window to print or not
           * Default is true
           */
          this.printOpenWindow = true;
          /**
           * Name of root component
           * Default is app-root
           */
          this.appRootName = 'app-root';
          /**
           * Do not fire print event - just show preview
           * Default is false
           */
          this.printPreviewOnly = false;
          this.appRootDislaySetting = '';
          this.$printWindowOpen = this.printWindowOpen.asObservable();
          this.eventadded = [];
          this.setRootConfigOptions(config);
      }
      /**
       * Set config from forRoot
       * @param config
       */
      NgxPrinterService.prototype.setRootConfigOptions = function (config) {
          if (config) {
              if (config.printOpenWindow) {
                  this.printOpenWindow = config.printOpenWindow;
              }
              if (config.timeToWaitRender) {
                  this.timeToWaitRender = config.timeToWaitRender;
              }
              if (config.renderClass) {
                  this.renderClass = config.renderClass;
              }
              if (config.appRootName) {
                  this.appRootName = config.appRootName;
              }
              if (config.markerPosition) {
                  this.markerPosition = config.markerPosition;
              }
              if (config.printPreviewOnly) {
                  this.printPreviewOnly = config.printPreviewOnly;
              }
          }
      };
      /***
       * Print a div identified by its id
       * @example
       * this.printerService.printDiv('printDiv');
       */
      NgxPrinterService.prototype.printDiv = function (divID) {
          var divToPrint = document.getElementById(divID);
          if (divToPrint) {
              this.print(divToPrint, this.printOpenWindow);
          }
          else {
              console.log("div with id " + divID + " not found..");
          }
      };
      /***
       * Print an Element identified by its className using getElementsByClassName
       * Prints the first one found
       */
      NgxPrinterService.prototype.printByClassName = function (className) {
          var elementToPrint = document.getElementsByClassName(className);
          if (elementToPrint && elementToPrint.length > 0) {
              this.print(elementToPrint[0], this.printOpenWindow);
          }
          else {
              console.log('element with id ${className} not found..');
          }
      };
      /**
       * Print Angular TemplateRef or a Component or String
       * @param contentToPrint
       * @example
       * this.printerService.printAngular(this.PrintTemplateTpl);
       */
      NgxPrinterService.prototype.printAngular = function (contentToPrint, context) {
          var nativeEl = this.createComponent(contentToPrint, null, context);
          this.print(nativeEl.nativeElement, this.printOpenWindow);
      };
      /**
       * Print single img
       * @example
       * this.printerService.printImg('assets/bratwurst.jpg');
       */
      NgxPrinterService.prototype.printImg = function (imgSrc) {
          var _this = this;
          var compRef = this.createComponent(null, imgSrc);
          var openNewWindow = this.printOpenWindow;
          compRef.instance.completed.subscribe(function (val) {
              compRef.hostView.detectChanges();
              console.log('completed:', val);
              _this.print(compRef.location.nativeElement, openNewWindow);
          });
      };
      /**
       * Print an native Element (HTML Element)
       * @param nativeElement
       * @example
       * this.printerService.printHTMLElement(this.PrintComponent.nativeElement);
       */
      NgxPrinterService.prototype.printHTMLElement = function (nativeElement) {
          this.print(nativeElement, this.printOpenWindow);
      };
      /**
       * Create and render component
       * @param contentToRender
       */
      NgxPrinterService.prototype.createComponent = function (contentToRender, imgSrc, context) {
          // this.viewContainerRef.clear();
          var factory = this.resolver.resolveComponentFactory(NgxPrinterComponent);
          var componentRef;
          if (contentToRender) {
              if (context === undefined) {
                  context = null;
              }
              var ngContent = this.resolveNgContent(contentToRender, context);
              componentRef = factory.create(this.injector, ngContent); // this.viewContainerRef.createComponent(factory);
          }
          else {
              componentRef = factory.create(this.injector);
          }
          componentRef.instance.renderClass = this.renderClass;
          if (imgSrc) {
              componentRef.instance.imgSrc = imgSrc;
              return componentRef;
          }
          componentRef.hostView.detectChanges();
          return componentRef.location; // location is native element
      };
      /**
       * Main print function
       * @param printContent
       */
      NgxPrinterService.prototype.print = function (printContent, printOpenWindow) {
          if (printOpenWindow === true) {
              var printContentClone = document.importNode(printContent, true); // printContent.cloneNode(true);
              this.printInNewWindow(printContentClone);
          }
          if (printOpenWindow === false) {
              var printContentClone = document.importNode(printContent, true); // printContent.cloneNode(true);
              var nativeEl = this.createComponent(printContentClone).nativeElement;
              this.openNgxPrinter = nativeEl;
              document.body.appendChild(this.openNgxPrinter);
              // window.scrollTo(0, 0);
              this.getAppRoot();
              if (this.appRoot) {
                  this.appRoot.style.display = 'none';
              }
              this.printCurrentWindow();
          }
      };
      /**
       * Print using a new window / tab
       * @param divToPrint
       */
      NgxPrinterService.prototype.printInNewWindow = function (divToPrint) {
          var _this = this;
          var printWindow = window.open('', 'PRINT');
          var title = document.title;
          printWindow.document.write('<HTML><HEAD><TITLE>' + title + '</TITLE></HEAD><BODY></BODY></HTML>');
          // printWindow.document.write(document.documentElement.innerHTML);
          var printWindowDoc = printWindow.document;
          this.copyCss(printWindowDoc);
          printWindowDoc.body.style.margin = '0 0';
          printWindowDoc.body.appendChild(divToPrint);
          printWindow.document.close();
          // printWindowDoc.body.innerHTML = divToPrint.outerHTML;
          setTimeout(function () { return _this.printTabWindow(printWindow, printWindowDoc); }, this.timeToWaitRender);
      };
      /**
       * Copy Css links to new page
       * @param printWindow
       */
      NgxPrinterService.prototype.copyCss = function (printWindowDoc) {
          var links = document.querySelectorAll('link');
          var styles = document.querySelectorAll('style');
          var targetHead = printWindowDoc.getElementsByTagName('head')[0];
          links.forEach(function (link) {
              targetHead.appendChild(document.importNode(link, true));
          });
          styles.forEach(function (style) {
              targetHead.appendChild(document.importNode(style, true));
          });
      };
      /**
       * Print window in new tab
       */
      NgxPrinterService.prototype.printTabWindow = function (printWindow, printWindowDoc) {
          if (this.printPreviewOnly) {
              return;
          }
          this.registerPrintEvent(printWindow, true);
          this.printWindowOpen.next(true);
          printWindow.focus(); // necessary for IE >= 10*/
          if (printWindowDoc.execCommand('print') === false) {
              printWindow.print();
          }
      };
      /**
       * Print the whole current window
       */
      NgxPrinterService.prototype.printCurrentWindow = function () {
          var _this = this;
          if (this.printPreviewOnly) {
              return;
          }
          this.registerPrintEvent(window, false);
          setTimeout(function () {
              _this.printWindowOpen.next(true);
              if (document.execCommand('print') === false) {
                  window.print();
              }
          }, this.timeToWaitRender);
      };
      /**
       * Listen to print event of window
       * @param printWindow
       */
      NgxPrinterService.prototype.registerPrintEvent = function (printWindow, printWithOpenInNewWindow) {
          var _this = this;
          var that = this;
          printWindow.focus(); // necessary for IE >= 10*/
          if (that.eventadded[printWindow.name]) {
              return;
          }
          printWindow.addEventListener('afterprint', function () {
              _this.eventadded[printWindow.name] = true;
              // console.log('afterprint');
              if (printWithOpenInNewWindow) {
                  that.eventadded[printWindow.name] = false;
              }
              that.cleanUp(printWindow, printWithOpenInNewWindow);
              that.printWindowOpen.next(false);
          });
      };
      /**
       * Close tab or clean up dom
       * @internal
       */
      NgxPrinterService.prototype.cleanUp = function (printWindow, printOpenWindow) {
          if (printOpenWindow === true) {
              console.log('close print window');
              printWindow.close();
              setTimeout(function () {
                  printWindow.close();
              }, 20);
          }
          if (printOpenWindow === false) {
              if (!this.openNgxPrinter) {
                  return;
              }
              if (document.body.getElementsByTagName('ngx-printer').length === 0) {
                  return;
              }
              if (this.appRoot) {
                  if (this.appRootDislaySetting !== '') {
                      this.appRoot.style.display = this.appRootDislaySetting;
                  }
                  else {
                      this.appRoot.style.display = '';
                  }
              }
              document.body.removeChild(this.openNgxPrinter);
              this.openNgxPrinter = null;
          }
      };
      /**
       * Create node or angular component
       * @param content
       * @internal
       */
      NgxPrinterService.prototype.resolveNgContent = function (content, context) {
          if (typeof content === 'string') {
              var element = document.createTextNode(content);
              return [[element]];
          }
          if (content instanceof i0.TemplateRef) {
              var viewRef = content.createEmbeddedView(context);
              viewRef.detectChanges();
              return [viewRef.rootNodes];
          }
          if (content instanceof HTMLElement) {
              return [[content]];
          }
          /** Otherwise it's a component */
          var factory = this.resolver.resolveComponentFactory(content);
          var componentRef = factory.create(this.injector);
          componentRef.changeDetectorRef.detectChanges();
          return [[componentRef.location.nativeElement]];
      };
      /**
       * Search for Angular App Root
       * @internal
       */
      NgxPrinterService.prototype.getAppRoot = function () {
          var appRoot = document.body.getElementsByTagName(this.appRootName);
          if (appRoot.length === 0) {
              return null;
          }
          else {
              this.appRoot = appRoot[0];
              this.appRootDislaySetting = this.appRoot.style.display;
          }
      };
      /**
       * Add a new item to print
       * Used by directive
       * @internal
       * @param newPrintItem  HTML id
       */
      NgxPrinterService.prototype.addPrintItem = function (newPrintItem) {
          var tmpItems = this._printItems.getValue();
          tmpItems.push(newPrintItem);
          this._printItems.next(tmpItems);
      };
      /**
       * Delete a print item from service
       * Used by directive
       * @internal
       * @param idOfItemToRemove
       */
      NgxPrinterService.prototype.removePrintItem = function (idOfItemToRemove) {
          var tmpItems = this._printItems.getValue();
          var newIitems = tmpItems.filter(function (item) { return item.id !== idOfItemToRemove; });
          this._printItems.next(newIitems);
      };
      /**
     * Gets a single print item from service
     * Used by directive
     * @internal
     * @param idOfItemToFind
     */
      NgxPrinterService.prototype.getPrintItem = function (idOfItemToRemove) {
          var tmpItems = this._printItems.getValue();
          var foundItem = tmpItems.find(function (item) { return item.id === idOfItemToRemove; });
          return foundItem;
      };
      /**
       * Print a print Item
       * @param printItemToPrint
       */
      NgxPrinterService.prototype.printPrintItem = function (printItemToPrint) {
          this.printHTMLElement(printItemToPrint.nativeElement);
      };
      /**
       * Print al list of print Items one after the other
       * @param printItemToPrint
       */
      NgxPrinterService.prototype.printPrintItems = function (printItemsToPrint, className) {
          var newDiv = document.createElement('div');
          if (className) {
              newDiv.classList.add(className);
          }
          else {
              newDiv.style.display = 'flex';
              newDiv.style.flexDirection = 'column';
          }
          printItemsToPrint.forEach(function (element) {
              newDiv.appendChild(element.nativeElement.cloneNode(true));
          });
          this.printHTMLElement(newDiv);
      };
      return NgxPrinterService;
  }());
  NgxPrinterService.ɵprov = i0.ɵɵdefineInjectable({ factory: function NgxPrinterService_Factory() { return new NgxPrinterService(i0.ɵɵinject(PrintServiceConfig, 8), i0.ɵɵinject(i0.ComponentFactoryResolver), i0.ɵɵinject(i0.INJECTOR)); }, token: NgxPrinterService, providedIn: "root" });
  NgxPrinterService.decorators = [
      { type: i0.Injectable, args: [{
                  providedIn: 'root'
              },] }
  ];
  NgxPrinterService.ctorParameters = function () { return [
      { type: PrintServiceConfig, decorators: [{ type: i0.Optional }] },
      { type: i0.ComponentFactoryResolver },
      { type: i0.Injector }
  ]; };

  /**
   * A class to store an item which can be printed
   */
  var PrintItem = /** @class */ (function () {
      function PrintItem() {
      }
      return PrintItem;
  }());

  /**
   * A directive to mark and store an HTML-Element as an item which
   * can be printed
   * An id has to be set
   */
  var PrintItemDirective = /** @class */ (function () {
      function PrintItemDirective(el, printerService) {
          this.el = el;
          this.printerService = printerService;
      }
      PrintItemDirective.prototype.ngOnInit = function () {
          if (this.el.nativeElement.id) {
              var tmpPrintItem = new PrintItem();
              tmpPrintItem.id = this.el.nativeElement.id;
              tmpPrintItem.nativeElement = this.el.nativeElement;
              this.printerService.addPrintItem(tmpPrintItem);
          }
      };
      PrintItemDirective.prototype.ngOnDestroy = function () {
          if (this.el.nativeElement.id) {
              this.printerService.removePrintItem(this.el.nativeElement.id);
          }
      };
      return PrintItemDirective;
  }());
  PrintItemDirective.decorators = [
      { type: i0.Directive, args: [{
                  selector: '[ngxPrintItem]'
              },] }
  ];
  PrintItemDirective.ctorParameters = function () { return [
      { type: i0.ElementRef },
      { type: NgxPrinterService }
  ]; };
  PrintItemDirective.propDecorators = {
      printName: [{ type: i0.Input }]
  };

  /**
   * Directly add function to a button to print an item
   */
  var PrintItemButtonDirective = /** @class */ (function () {
      function PrintItemButtonDirective(el, printerService) {
          this.el = el;
          this.printerService = printerService;
          /**
           * Id of print item to be printed
           */
          this.printItemId = '';
          /**
           * html id of div to be printed
           */
          this.divID = '';
          /**
           * print item by class name
           */
          this.className = '';
          /**
           * print current window
           */
          this.printWindow = 'false';
      }
      PrintItemButtonDirective.prototype.ngOnInit = function () {
          var _this = this;
          if (this.el.nativeElement && this.checkInputs()) {
              this.el.nativeElement.addEventListener('click', function () {
                  if (_this.printItemId !== '') {
                      _this.prinPrintItem();
                  }
                  if (_this.divID !== '') {
                      _this.printerService.printDiv(_this.divID);
                  }
                  if (_this.className !== '') {
                      _this.printerService.printByClassName(_this.className);
                  }
                  if (_this.printWindow !== 'false') {
                      _this.printerService.printCurrentWindow();
                  }
              });
          }
      };
      /**
       * Check if at least one property is set
       */
      PrintItemButtonDirective.prototype.checkInputs = function () {
          var check = !(this.printWindow === 'false' && this.printItemId === '' && this.divID === '' && this.className === '');
          return check;
      };
      /**
       * print item from print items
       */
      PrintItemButtonDirective.prototype.prinPrintItem = function () {
          var itemToPrint = this.printerService.getPrintItem(this.printItemId);
          if (itemToPrint) {
              this.printerService.printPrintItem(itemToPrint);
          }
      };
      return PrintItemButtonDirective;
  }());
  PrintItemButtonDirective.decorators = [
      { type: i0.Directive, args: [{
                  selector: '[ngxPrintItemButton]'
              },] }
  ];
  PrintItemButtonDirective.ctorParameters = function () { return [
      { type: i0.ElementRef },
      { type: NgxPrinterService }
  ]; };
  PrintItemButtonDirective.propDecorators = {
      printItemId: [{ type: i0.Input }],
      divID: [{ type: i0.Input }],
      className: [{ type: i0.Input }],
      printWindow: [{ type: i0.Input }]
  };

  /**
   * Mark an div as printable and provide direct print function
   */
  var PrintItemMarkerDirective = /** @class */ (function () {
      function PrintItemMarkerDirective(el, renderer2, printerService) {
          this.el = el;
          this.renderer2 = renderer2;
          this.printerService = printerService;
          this.customClass = '';
          this.directPrint = false;
          this.imgPosition = exports.ngxPrintMarkerPosition.Topleft;
          /**
           * Data for an svg image used as background url
           * @example
           * backgroundImage = 'data:image/svg+xml;base64,PD9....'
           *
           */
          this.backgroundImage = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNy4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgNTAgNTAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDUwIDUwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwYXRoIGQ9Ik0zOS4zODcsMjEuNDcxSDMyLjI5VjExLjE5OWMwLTAuNTUzLTAuNDQ3LTEtMS0xSDE3LjQ4NGMtMC41NTMsMC0xLDAuNDQ3LTEsMXYxMC4yNzFIOS4zODdjLTAuNTUzLDAtMSwwLjQ0Ny0xLDFWMzUuNDUNCgljMCwwLjU1MywwLjQ0NywxLDEsMWg2Ljg5NHYzLjU2NWMwLDAuNTUzLDAuNDQ3LDEsMSwxaDEzLjgwNmMwLjU1MywwLDEtMC40NDcsMS0xVjM2LjQ1aDcuMzAxYzAuNTUzLDAsMS0wLjQ0NywxLTFWMjIuNDcxDQoJQzQwLjM4NywyMS45MTgsMzkuOTM5LDIxLjQ3MSwzOS4zODcsMjEuNDcxeiBNMTguNDg0LDEyLjE5OUgzMC4yOXY5LjI3MUgxOC40ODRWMTIuMTk5eiBNMzAuMDg2LDM5LjAxNkgxOC4yOHYtNi4zMjloMTEuODA2VjM5LjAxNg0KCXogTTM4LjM4NywzNC40NWgtNi4zMDF2LTIuNzY0YzAtMC41NTMtMC40NDctMS0xLTFIMTcuMjhjLTAuNTUzLDAtMSwwLjQ0Ny0xLDF2Mi43NjRoLTUuODk0VjIzLjQ3MWg2Ljg5NA0KCWMwLjA2OCwwLjAxNCwwLjEzMSwwLjA0MSwwLjIwMywwLjA0MUgzMS4yOWMwLjA3MiwwLDAuMTM2LTAuMDI3LDAuMjAzLTAuMDQxaDYuODkzVjM0LjQ1eiIvPg0KPC9zdmc+DQo=';
          this.imgMainStyles = {
              'background-color': '#c3c3b6',
              height: '16px',
              width: '16px',
              position: 'absolute',
              cursor: 'pointer'
          };
          this.imgPositionTopLeft = {
              left: '1px',
              top: '1px',
          };
          this.imgPositionTopRight = {
              right: '1px',
              top: '1px',
          };
          this.imgPositionBottomLeft = {
              left: '1px',
              bottom: '1px',
          };
          this.imgPositionBottomRight = {
              right: '1px',
              bottom: '1px',
          };
          /**
           * Event fired when marker clicked
           * @emits
           */
          this.printClicked = new i0.EventEmitter();
      }
      PrintItemMarkerDirective.prototype.ngOnInit = function () {
          var _this = this;
          var newIndicator = document.createElement('div');
          this.imgPosition = this.printerService.markerPosition;
          this.addIndicatorDiv(this.el, newIndicator);
          newIndicator.addEventListener('click', function () {
              if (_this.directPrint) {
                  var elementToPrint = _this.el.nativeElement.getElementsByClassName('print_indicator');
                  if (elementToPrint && elementToPrint.length > 0) {
                      _this.renderer2.setStyle(elementToPrint[0], 'visibility', 'hidden');
                      _this.printerService.printHTMLElement(_this.el.nativeElement);
                      _this.renderer2.setStyle(elementToPrint[0], 'visibility', 'visible');
                  }
                  else {
                      console.log('element with indicator class not found..');
                  }
              }
              _this.printClicked.emit(true);
          });
      };
      /**
       * Change and add div with Indicator
       * @param el
       * @param newIndicator
       */
      PrintItemMarkerDirective.prototype.addIndicatorDiv = function (el, newIndicator) {
          var natElement = el.nativeElement;
          this.renderer2.addClass(newIndicator, 'print_indicator');
          this.renderer2.setStyle(natElement, 'position', 'relative');
          this.renderer2.appendChild(el.nativeElement, newIndicator);
          if (this.customClass === '') {
              this.setCss(newIndicator);
          }
          else {
              this.renderer2.addClass(newIndicator, this.customClass);
          }
      };
      /**
       * Set the default css properties
       * @param newIndicator
       */
      PrintItemMarkerDirective.prototype.setCss = function (newIndicator) {
          var _this = this;
          Object.keys(this.imgMainStyles).forEach(function (element) {
              newIndicator.style.setProperty("" + element, _this.imgMainStyles[element]);
          });
          this.setPosition(newIndicator);
          var imgUrl = 'url(' + this.backgroundImage + ')';
          newIndicator.style.setProperty("background-image", imgUrl);
      };
      /**
       * Set image position
       * @internal
       * @param newIndicator
       */
      PrintItemMarkerDirective.prototype.setPosition = function (newIndicator) {
          var _this = this;
          switch (this.imgPosition) {
              case exports.ngxPrintMarkerPosition.Topleft: {
                  Object.keys(this.imgPositionTopLeft).forEach(function (element) {
                      newIndicator.style.setProperty("" + element, _this.imgPositionTopLeft[element]);
                  });
                  break;
              }
              case exports.ngxPrintMarkerPosition.TopRight: {
                  Object.keys(this.imgPositionTopRight).forEach(function (element) {
                      newIndicator.style.setProperty("" + element, _this.imgPositionTopRight[element]);
                  });
                  break;
              }
              case exports.ngxPrintMarkerPosition.BottomLeft: {
                  Object.keys(this.imgPositionBottomLeft).forEach(function (element) {
                      newIndicator.style.setProperty("" + element, _this.imgPositionBottomLeft[element]);
                  });
                  break;
              }
              case exports.ngxPrintMarkerPosition.BottomRight: {
                  Object.keys(this.imgPositionBottomRight).forEach(function (element) {
                      newIndicator.style.setProperty("" + element, _this.imgPositionBottomRight[element]);
                  });
                  break;
              }
              default: {
                  Object.keys(this.imgPositionTopLeft).forEach(function (element) {
                      newIndicator.style.setProperty("" + element, _this.imgPositionTopLeft[element]);
                  });
                  break;
              }
          }
      };
      return PrintItemMarkerDirective;
  }());
  PrintItemMarkerDirective.decorators = [
      { type: i0.Directive, args: [{
                  selector: '[ngxPrintItemMarker]',
              },] }
  ];
  PrintItemMarkerDirective.ctorParameters = function () { return [
      { type: i0.ElementRef },
      { type: i0.Renderer2 },
      { type: NgxPrinterService }
  ]; };
  PrintItemMarkerDirective.propDecorators = {
      customClass: [{ type: i0.Input }],
      directPrint: [{ type: i0.Input }],
      imgPosition: [{ type: i0.Input }],
      backgroundImage: [{ type: i0.Input }],
      printClicked: [{ type: i0.Output }]
  };

  var NgxPrinterModule = /** @class */ (function () {
      function NgxPrinterModule() {
      }
      NgxPrinterModule.forRoot = function (config) {
          return {
              ngModule: NgxPrinterModule,
              providers: [{ provide: PrintServiceConfig, useValue: config }]
          };
      };
      return NgxPrinterModule;
  }());
  NgxPrinterModule.decorators = [
      { type: i0.NgModule, args: [{
                  declarations: [NgxPrinterComponent, PrintItemDirective, PrintItemButtonDirective, PrintItemMarkerDirective],
                  imports: [],
                  exports: [NgxPrinterComponent, PrintItemDirective, PrintItemButtonDirective, PrintItemMarkerDirective],
                  entryComponents: [NgxPrinterComponent]
              },] }
  ];

  /*
   * Public API Surface of ngx-printer
   */

  /**
   * Generated bundle index. Do not edit.
   */

  exports.NgxPrinterComponent = NgxPrinterComponent;
  exports.NgxPrinterModule = NgxPrinterModule;
  exports.NgxPrinterService = NgxPrinterService;
  exports.PrintItem = PrintItem;
  exports.PrintItemButtonDirective = PrintItemButtonDirective;
  exports.PrintItemDirective = PrintItemDirective;
  exports.PrintItemMarkerDirective = PrintItemMarkerDirective;
  exports.PrintServiceConfig = PrintServiceConfig;

  Object.defineProperty(exports, '__esModule', { value: true });

})));
//# sourceMappingURL=ngx-printer.umd.js.map
